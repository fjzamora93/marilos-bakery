<div class="min-h-screen py-10 px-4 sm:px-6 lg:px-8 bg-caramel">
  <div class="max-w-5xl mx-auto bg-white/90 rounded-3xl shadow-bakery p-6 sm:p-10 lg:p-14">
    
    <ng-container *ngIf="product as p">
      <div class="relative">
        
        <!-- Imagen flotante a la derecha en pantallas grandes -->
        <div
          class="w-full max-w-sm float-none lg:float-right lg:ml-8 mb-6 rounded-3xl overflow-hidden border-4 border-bakery-gold shadow-sweet bg-gray-200">
          <img 
            [src]="p.imageUrl" 
            [alt]="p.name"
            class="w-full h-auto object-cover transition-opacity duration-700"
            [class.opacity-0]="!imageLoaded"
            [class.opacity-100]="imageLoaded"
            (load)="onImageLoad()"
            loading="lazy"
          />
          <div *ngIf="!imageLoaded" class="absolute inset-0 bg-gray-300 animate-pulse"></div>
        </div>

        <!-- Texto fluye alrededor de la imagen -->
        <div class="text-bakery-brown text-lg leading-relaxed">
          <h1 class="text-4xl lg:text-5xl font-elegant font-bold text-bakery-deep mb-4">
            {{ p.name }}
          </h1>

          <div class="flex flex-wrap items-center gap-4 mb-6">
            <span class="inline-block bg-accent-caramel/90 text-bakery-cream px-4 py-1.5 rounded-full text-sm font-semibold tracking-wide shadow-warm">
              {{ p.price | number:'1.2-2' }} â‚¬
            </span>
          </div>

          <div
            class="bg-bakery-cream/60 rounded-xl p-5 shadow-inner"
            [innerHTML]="safeDescription">
          </div>
        </div>

        <!-- Clear float -->
        <div class="clear-both"></div>
      </div>
    </ng-container>

    <!-- Loading -->
    <div class="text-center mt-12" *ngIf="loading">
      <span class="text-bakery-brown text-lg font-elegant animate-pulse">Cargando producto...</span>
    </div>

    <!-- Error -->
    <div class="text-center mt-12" *ngIf="error">
      <span class="text-red-600 text-lg font-semibold">{{ error }}</span>
    </div>
  </div>
</div>