<!-- Top Bar - Marilo's Bakery -->
<nav class="relative bg-bakery-cream shadow-warm backdrop-blur-sm border-b  overflow-visible">

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <div class="flex items-center justify-between h-16">
      
      <!-- Logo y Menú Hamburguesa (Lado izquierdo) -->
      <div class="flex items-center space-x-4">
        <!-- Botón Hamburguesa (Solo visible cuando autenticado) -->
        @if (isAuthenticated) {
          <button 
            class="group inline-flex items-center justify-center w-10 h-10 rounded-lg bg-bakery-gold/20 border border-bakery-gold/30 text-bakery-deep hover:text-accent-caramel hover:bg-bakery-gold/30 hover:border-accent-caramel focus:outline-none focus:ring-2 focus:ring-accent-caramel focus:ring-offset-2 focus:ring-offset-bakery-cream transition-all duration-200"
            type="button" 
            (click)="openSidebar()"
            aria-label="Abrir menú">
            <svg class="h-5 w-5 transition-transform duration-200 group-hover:scale-110" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        }
        
        <!-- Logo + Texto -->
        <a href="/" class="hidden lg:flex items-center space-x-3 group">
          <div class="relative">
            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-accent-caramel to-bakery-gold flex items-center justify-center ring-2 ring-bakery-gold/30 group-hover:ring-accent-caramel transition-all duration-300">
              <!-- Icono de cupcake -->
               <svg class="relative z-10 w-5 h-5 text-bakery-deep" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2C10.34 2 9 3.34 9 5H8C6.9 5 6 5.9 6 7C6 7.35 6.07 7.69 6.2 8H5C4.45 8 4 8.45 4 9C4 9.55 4.45 10 5 10H19C19.55 10 20 9.55 20 9C20 8.45 19.55 8 19 8H17.8C17.93 7.69 18 7.35 18 7C18 5.9 17.1 5 16 5H15C15 3.34 13.66 2 12 2ZM5 12L6.6 20.2C6.79 21.16 7.61 22 8.6 22H15.4C16.39 22 17.21 21.16 17.4 20.2L19 12H5Z"/>
                </svg>
            </div>
            <div class="absolute -top-1 -right-1 h-3 w-3 bg-accent-strawberry rounded-full animate-pulse"></div>
          </div>
          <div class="flex flex-col">
            <span class="text-bakery-deep font-elegant font-bold text-lg leading-none">
              Marilo's
            </span>
            <span class="text-accent-caramel font-medium text-sm leading-none">
              Bakery
            </span>
          </div>
        </a>
      </div>

      <!-- Usuario y Login (Lado derecho) -->
      <div class="flex items-center space-x-4">
        @if (!isAuthenticated) {
          
          <button 
            class="group relative overflow-hidden bg-gradient-to-r from-accent-caramel to-bakery-gold text-bakery-cream px-6 py-2.5 rounded-full font-medium text-sm hover:from-bakery-gold hover:to-accent-caramel transform hover:scale-105 transition-all duration-300 shadow-warm hover:shadow-bakery focus:outline-none focus:ring-2 focus:ring-accent-caramel focus:ring-offset-2 focus:ring-offset-bakery-cream"
            (click)="openLoginModal()">
            <span class="relative z-10 flex items-center space-x-2">
              <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
              </svg>
              <span>Acceder</span>
            </span>
            <div class="absolute inset-0 bg-white/20 translate-x-[-100%] group-hover:translate-x-0 transition-transform duration-300"></div>
          </button>

        } @else {
          <div class="flex items-center space-x-3">
            <!-- Avatar y Saludo -->
            <div class="flex items-center space-x-3">
              <div class="relative group">
                <div class="h-9 w-9 rounded-full bg-gradient-to-r from-accent-caramel to-bakery-gold flex items-center justify-center ring-2 ring-bakery-gold/30 group-hover:ring-accent-caramel transition-all duration-300">
                  <span class="text-bakery-cream font-semibold text-sm">
                    {{ currentUser?.email ? (currentUser!.email!.split("@")[0].charAt(0).toUpperCase()) : 'U' }}
                  </span>
                </div>
                <div class="absolute -bottom-1 -right-1 h-3 w-3 bg-accent-strawberry rounded-full border-2 border-bakery-cream animate-pulse"></div>
              </div>
              <div class="hidden sm:block">
                <span class="text-bakery-deep text-sm font-medium">
                  ¡Hola, {{ currentUser?.email ? (currentUser!.email!.split("@")[0]) : 'Chef' }}!
                </span>
              </div>
            </div>
            
            <!-- Botón Logout -->
            <button 
              class="group relative overflow-hidden bg-neutral-200 text-bakery-deep px-4 py-2 rounded-full text-sm font-medium hover:bg-neutral-300 hover:text-accent-caramel transform hover:scale-105 transition-all duration-300 border border-bakery-gold/30 hover:border-accent-caramel focus:outline-none focus:ring-2 focus:ring-accent-caramel focus:ring-offset-2 focus:ring-offset-bakery-cream"
              (click)="onLogout()">
              <span class="flex items-center space-x-2">
                <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                </svg>
                <span>Salir</span>
              </span>
            </button>
          </div>
        }
           <!-- Selector de idioma -->
        <div class="flex gap-1">
          <button 
            (click)="changeLanguage('es')"
            [class]="currentLanguage === 'es' ? 
              'bg-accent-caramel text-bakery-cream shadow-warm' : 
              'bg-neutral-200 text-bakery-deep hover:text-accent-caramel hover:bg-neutral-300'"
            class="px-2 py-1 rounded text-xs font-medium transition-all duration-200 border border-bakery-gold/20">
            ES
          </button>
          <button 
            (click)="changeLanguage('en')"
            [class]="currentLanguage === 'en' ? 
              'bg-accent-caramel text-bakery-cream shadow-warm' : 
              'bg-neutral-200 text-bakery-deep hover:text-accent-caramel hover:bg-neutral-300'"
            class="px-2 py-1 rounded text-xs font-medium transition-all duration-200 border border-bakery-gold/20">
            EN
          </button>
        </div>
      </div>
    </div>
  </div>


   
</nav>

<!-- Una sola ondulación irregular con el mismo color del navbar -->
<div class="absolute -mt-1 w-full left-0 right-0 z-10">
  <svg viewBox="0 0 1440 80" xmlns="http://www.w3.org/2000/svg" class="w-full h-16" preserveAspectRatio="none">
    <path d="M0,0 
            C80,35 120,15 180,45 
            C220,65 280,25 340,50 
            C400,75 450,30 520,55 
            C580,80 620,35 680,60 
            C740,85 780,40 840,65 
            C900,90 940,45 1000,70 
            C1060,95 1100,50 1160,75 
            C1220,100 1280,55 1340,80 
            C1380,95 1420,70 1440,85 
            L1440,0 Z" 
          fill="#FDF4E3"/>
  </svg>
</div>


<!-- Componente Sidebar -->
<app-sidebar 
  [isOpen]="isSidebarOpen"
  [currentUser]="currentUser"
  (closeSidebar)="closeSidebar()">
</app-sidebar>

<!-- Componente Login -->
<app-login></app-login>